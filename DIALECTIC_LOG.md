# Dialectic Log: School Scheduler Puzzle

## [2026-02-24] コアエンジンの制約アルゴリズム実装
**ヒビチョフ（ビジョン）**: 
「UIでガシガシ動かしたいから、状態はContextでグローバルに持って、変更のたびに全制約をスマートに計算してパッと赤い警告が出れば最高だよね！純粋関数にしておけばテストもしやすいし、未来の予測AI搭載にもつなげやすいよ！」

**ムッチャン（慎重派）**: 
「待てよ、純粋関数で組むのは賛成だが、『1つのコマを動かす際、影響を受ける全てのコマを再計算または警告表示する』という絶対遵守プロトコルがある。
O(N^2)になりがちな衝突判定を、まずはMapを用いたO(N)でグループ化する堅格なロジック `validateSchedule` を実装したぞ。
これで非常勤講師のシフトチェックと、A組・B組の同期チェック漏れといったパニックを防げるはずだ。」

## [2026-02-24] UIアーキテクチャとD&Dの統合
**ヒビチョフ**:
「`@dnd-kit/core` を使って、未配置の授業プールからカレンダーのセルへスーッとドラッグ＆ドロップできるようにしたよ！CellコンポーネントとSessionItemコンポーネントを分離して、Tailwindでダークモードの宇宙ステーションっぽいリッチなUI（#1c1c1cベース）に仕上げるよ！」

**ムッチャン**:
「UIの見栄えは任せるが、Context APIの `dispatch` をトリガーした際のエラーの伝播は正確に行う必要がある。ドラッグ終了時に `MOVE_SESSION` アクションを発火させ、直ちに `validateSchedule` が再計算され、各 `SessionItem` が自身のエラー状態を検知してTooltipや赤枠等で警告を出す設計とする。」
